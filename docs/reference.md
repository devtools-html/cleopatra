<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [match](#match)
-   [categories](#categories)
-   [functionNameCategorizer](#functionnamecategorizer)
-   [sampleCategorizer](#samplecategorizer)
-   [summarizeSampleCategories](#summarizesamplecategories)
-   [calculateSummaryPercentages](#calculatesummarypercentages)
-   [categorizeThreadSamples](#categorizethreadsamples)
-   [summarizeCategories](#summarizecategories)
-   [objectEntries](#objectentries)
-   [threadDispatcher](#threaddispatcher)
-   [getStore](#getstore)
-   [Draggable](#draggable)
-   [displayPercentage](#displaypercentage)
-   [getNode](#getnode)
-   [initializeStore](#initializestore)
-   [getFloatStyle](#getfloatstyle)
-   [getContentRect](#getcontentrect)
-   [getMarginRect](#getmarginrect)
-   [getFunctionInfo](#getfunctioninfo)
-   [messages](#messages)
-   [messages](#messages-1)
-   [toStructOfArrays](#tostructofarrays)
-   [preprocess-profile](#preprocess-profile)
-   [preprocessThread](#preprocessthread)
-   [preprocessSharedLibraries](#preprocesssharedlibraries)
-   [adjustTimestamps](#adjusttimestamps)
-   [preprocessProfile](#preprocessprofile)
-   [profile-data](#profile-data)
    -   [resourceTypes](#resourcetypes)
    -   [getFuncStackInfo](#getfuncstackinfo)
    -   [filterThreadToPrefixStack](#filterthreadtoprefixstack)
    -   [filterThreadToPostfixStack](#filterthreadtopostfixstack)
-   [getChildren](#getchildren)
-   [getNode](#getnode-1)
-   [SymbolStoreDB](#symbolstoredb)
    -   [constructor](#constructor)
    -   [getSymbolsForAddressesInLib](#getsymbolsforaddressesinlib)
-   [SymbolStore](#symbolstore)
    -   [constructor](#constructor-1)
    -   [getFuncAddressTableForLib](#getfuncaddresstableforlib)
    -   [getSymbolsForAddressesInLib](#getsymbolsforaddressesinlib-1)
-   [getContainingLibrary](#getcontaininglibrary)
-   [getClosestLibrary](#getclosestlibrary)
-   [gatherFuncsInThread](#gatherfuncsinthread)
-   [findFunctionsToMergeAndSymbolicationAddresses](#findfunctionstomergeandsymbolicationaddresses)
-   [setFuncNames](#setfuncnames)
-   [applyFunctionMerging](#applyfunctionmerging)
-   [symbolicateThread](#symbolicatethread)
-   [symbolicateProfile](#symbolicateprofile)
-   [encodingChars](#encodingchars)
-   [withSize](#withsize)

## match

[src/common/summarize-profile.js:19-26](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/common/summarize-profile.js#L19-L26 "Source code on GitHub")

A list of strategies for matching sample names to patterns.

Type: {}

## categories

[src/common/summarize-profile.js:40-85](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/common/summarize-profile.js#L40-L85 "Source code on GitHub")

Categories is a list that includes the necessary information to match a sample to
a category. This list will need to be adjusted as the engine implementation switches.
Each category definition is a tuple that takes the following form:

[
  matches, // A function that returns true/false for how the pattern should be matched.
  pattern, // The pattern that should match the sample name.
  category, // The category to finally label the sample.
]

## functionNameCategorizer

[src/common/summarize-profile.js:107-125](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/common/summarize-profile.js#L107-L125 "Source code on GitHub")

Return a function that categorizes a function name. The categories
are cached between calls.

Returns **[function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function)** Function categorizer.

## sampleCategorizer

[src/common/summarize-profile.js:132-182](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/common/summarize-profile.js#L132-L182 "Source code on GitHub")

Given a profile, return a function that categorizes a sample.

**Parameters**

-   `thread` **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** Thread from a profile.

Returns **[function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function)** Sample stack categorizer.

## summarizeSampleCategories

[src/common/summarize-profile.js:192-202](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/common/summarize-profile.js#L192-L202 "Source code on GitHub")

Count the number of samples in a given category. This will also count subcategories
in the case of categories labeled like "script.link", so "script" and "script.link"
will each be counted as having a sample.

**Parameters**

-   `summary` **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** Accumulates the counts.
-   `fullCategoryName` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The name of the category.

Returns **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** summary

## calculateSummaryPercentages

[src/common/summarize-profile.js:209-224](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/common/summarize-profile.js#L209-L224 "Source code on GitHub")

Finalize the summary calculation by attaching percentages and sorting the result.

**Parameters**

-   `summary` **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The object that summarizes the times of the samples.

Returns **[array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)** The summary with percentages.

## categorizeThreadSamples

[src/common/summarize-profile.js:282-296](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/common/summarize-profile.js#L282-L296 "Source code on GitHub")

Take a profile and return a summary that categorizes each sample, then calculate
a summary of the percentage of time each sample was present.

**Parameters**

-   `profile` **[array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)** The current profile.

Returns **[array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)** Stacks mapped to categories.

## summarizeCategories

[src/common/summarize-profile.js:312-319](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/common/summarize-profile.js#L312-L319 "Source code on GitHub")

Take a profile and return a summary that categorizes each sample, then calculate
a summary of the percentage of time each sample was present.

**Parameters**

-   `profile` **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The profile to summarize.
-   `threadCategories` **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** Each thread's categories for the samples.

Returns **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The summaries of each thread.

## objectEntries

[src/common/summarize-profile.js:386-394](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/common/summarize-profile.js#L386-L394 "Source code on GitHub")

Flow requires a type-safe implementation of Object.entries().
See: <https://github.com/facebook/flow/issues/2174>

**Parameters**

-   `object` **{}** 

Returns **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;\[[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String), T]>** 

## threadDispatcher

[src/common/thread-middleware.js:19-25](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/common/thread-middleware.js#L19-L25 "Source code on GitHub")

Create a middleware that allows for dispatching actions between threads. This
inspects each action, hijacks it if it has a certain key, and then uses postMessage
to send it to another thread. The actions are expected to have the following form:

const action = {
  type: "ACTION_NAME",
  // either:
  toWorker: true,
  // or maybe:
  toContent: true,
  ...data
}

The toWorker and toContent can be arbitrarily defined keys, defined by the application,
but in this case the intent is to only use toWorker and toContent.

**Parameters**

-   `thread`  
-   `key`  

## getStore

[src/content/async-storage.js:43-187](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/async-storage.js#L43-L187 "Source code on GitHub")

Adapted from <https://hg.mozilla.org/mozilla-central/file/a77b73c7723e1060993045fb31eb2f0a30473486/devtools/shared/async-storage.js>
(converted to accept db and store names, and to use ES6 module syntax).

This file defines an asynchronous version of the localStorage API, backed by
an IndexedDB database.  It creates a global asyncStorage object that has
methods like the localStorage object.

To store a value use setItem:

  asyncStorage.setItem("key", "value");

This returns a promise in case you want confirmation that the value has been stored.

 asyncStorage.setItem("key", "newvalue").then(function() {
   console.log("new value stored");
 });

To read a value, call getItem(), but note that you must wait for a promise
resolution for the value to be retrieved.

 asyncStorage.getItem("key").then(function(value) {
   console.log("The value of key is:", value);
 });

Note that unlike localStorage, asyncStorage does not allow you to store and
retrieve values by setting and querying properties directly. You cannot just
write asyncStorage.key; you have to explicitly call setItem() or getItem().

removeItem(), clear(), length(), and key() are like the same-named methods of
localStorage, and all return a promise.

The asynchronous nature of getItem() makes it tricky to retrieve multiple
values. But unlike localStorage, asyncStorage does not require the values you
store to be strings.  So if you need to save multiple values and want to
retrieve them together, in a single asynchronous operation, just group the
values into a single object. The properties of this object may not include
DOM elements, but they may include things like Blobs and typed arrays.

**Parameters**

-   `dbName`  

## Draggable

[src/content/components/Draggable.js:11-84](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/components/Draggable.js#L11-L84 "Source code on GitHub")

**Extends Component**

A component that reports mouse dragging (left mouse button only) in its
onMove handler.
While the mouse button is pressed, onMove is called on each mouse move with
three arguments: the value of its 'value' field at mousedown time, and the
x and y deltas compared to the mouse position at mousedown.
During the drag, the additional className 'draggable' is set on the element.

## displayPercentage

[src/content/components/SummarizeProfileThread.js:38-43](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/components/SummarizeProfileThread.js#L38-L43 "Source code on GitHub")

Format a percentage for display, e.g. 0.1344844543 => "13.45%".

**Parameters**

-   `n` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** The number.

Returns **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The formatted string.

## getNode

[src/content/containers/ProfileMarkersView.js:49-78](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/containers/ProfileMarkersView.js#L49-L78 "Source code on GitHub")

Return an object with information about the node with index markerIndex.

**Parameters**

-   `markerIndex` **\[type]** [description]

Returns **\[type]** [description]

## initializeStore

[src/content/create-store.js:14-38](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/create-store.js#L14-L38 "Source code on GitHub")

Isolate the store creation into a function, so that it can be used outside of the
app's execution context, e.g. for testing.

Returns **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** Redux store.

## getFloatStyle

[src/content/css-geometry-tools.js:9-11](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/css-geometry-tools.js#L9-L11 "Source code on GitHub")

Return a float number for the number of CSS pixels from the computed style
of the supplied CSS property on the supplied element.

**Parameters**

-   `elem` **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The DOM element whose computed style to check.
-   `cssProperty` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The property whose value to check.
-   `win` **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The window object used for getComputedStyle

Returns **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** A float number containing the number of pixels.

## getContentRect

[src/content/css-geometry-tools.js:52-61](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/css-geometry-tools.js#L52-L61 "Source code on GitHub")

Returns a DOMRect for the content rect of the element, in float CSS pixels.
Returns an empty rect if the object has zero or more than one client rects.

**Parameters**

-   `elem` **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The DOM element whose content rect to compute.

Returns **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The element's content rect.

## getMarginRect

[src/content/css-geometry-tools.js:69-78](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/css-geometry-tools.js#L69-L78 "Source code on GitHub")

Returns a DOMRect for the margin rect of the element, in float CSS pixels.
Returns an empty rect if the object has zero or more than one client rects.

**Parameters**

-   `elem` **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The DOM element whose margin rect to compute.

Returns **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The element's margin rect.

## getFunctionInfo

[src/content/function-info.js:149-211](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/function-info.js#L149-L211 "Source code on GitHub")

Get an object with information about the function.

**Parameters**

-   `fullName` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The function name

Returns **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** An object of the form:
                          {
                            functionName: string,
                            libraryName: string,
                            lineInformation: string,
                            isRoot: bool,
                            isJSFrame: bool
                          }
                          libraryName is a string index into the resources array at the top of this file.

## messages

[src/content/messages/index.js:6-6](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/messages/index.js#L6-L6 "Source code on GitHub")

Messages are the translation layer from actions dispatched by the worker
thread to the content thread. This de-couples the state of the two threads.

## messages

[src/worker/messages/index.js:7-7](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/worker/messages/index.js#L7-L7 "Source code on GitHub")

Messages are the translation layer from actions dispatched by the content
thread to the worker thread. This de-couples the state of the two threads.
In the worker this is the only place that actions can be dispatched.

## toStructOfArrays

[src/content/preprocess-profile.js:20-27](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/preprocess-profile.js#L20-L27 "Source code on GitHub")

Turn a data table from the form `{ schema, data }` (as used in the raw profile
JSON) into a struct of arrays. This isn't very nice to read, but it
drastically reduces the number of JS objects the JS engine has to deal with,
resulting in fewer GC pauses and hopefully better performance.

**Parameters**

-   `rawTable` **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** A data table of the form `{ schema, data }`.

Returns **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** A data table of the form `{ length: number, field1: array, field2: array }`

## preprocess-profile

[src/content/preprocess-profile.js:20-27](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/preprocess-profile.js#L20-L27 "Source code on GitHub")

Module for converting a profile into the 'preprocessed' format.

**Parameters**

-   `rawTable`  

## preprocessThread

[src/content/preprocess-profile.js:183-185](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/preprocess-profile.js#L183-L185 "Source code on GitHub")

Convert the given thread into preprocessed form. See docs/profile-data.md for more
information.

**Parameters**

-   `thread` **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The thread object, in the 'raw' format.
-   `libs` **[array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)** A libs array, in preprocessed format (as returned by preprocessSharedLibraries).

Returns **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** A new thread object in the 'preprocessed' format.

## preprocessSharedLibraries

[src/content/preprocess-profile.js:192-205](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/preprocess-profile.js#L192-L205 "Source code on GitHub")

Ensure every lib has pdbName and breakpadId fields, and sort them by start address.

**Parameters**

-   `libs` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The sharedLibrary JSON string as found in a profile in the 'raw' format.

Returns **[array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)** An array of lib objects, sorted by startAddress.

## adjustTimestamps

[src/content/preprocess-profile.js:365-369](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/preprocess-profile.js#L365-L369 "Source code on GitHub")

Adjust the "time" field by the given delta.

**Parameters**

-   `samplesOrMarkers` **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The table of samples/markers.
-   `delta` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** The time delta, in milliseconds, by which to adjust.

Returns **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** A samples/markers table with adjusted time values.

## preprocessProfile

[src/content/preprocess-profile.js:378-421](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/preprocess-profile.js#L378-L421 "Source code on GitHub")

Convert a profile from "raw" format into the preprocessed format.
For a description of the preprocessed format, look at docs/profile-data.md or
alternately the tests for this function.

**Parameters**

-   `profile` **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** A profile object, in the 'raw' format.

Returns **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** A new profile object, in the 'preprocessed' format.

## profile-data

[src/content/profile-data.js:5-15](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/profile-data.js#L5-L15 "Source code on GitHub")

### resourceTypes

[src/content/profile-data.js:23-30](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/profile-data.js#L23-L30 "Source code on GitHub")

Various helpers for dealing with the profile as a data structure.

### getFuncStackInfo

[src/content/profile-data.js:42-91](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/profile-data.js#L42-L91 "Source code on GitHub")

Takes the stack table and the frame table, creates a func stack table and
returns a map from each stack to its corresponding func stack which can be
used to provide funcStack information for the samples data.

**Parameters**

-   `stackTable` **StackTable** The thread's stackTable.
-   `frameTable` **FrameTable** The thread's frameTable.
-   `funcTable` **FuncTable** The thread's funcTable.

Returns **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The funcStackTable and the stackIndexToFuncStackIndex map.

### filterThreadToPrefixStack

[src/content/profile-data.js:237-288](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/profile-data.js#L237-L288 "Source code on GitHub")

Filter thread to only contain stacks which start with |prefixFuncs|, and
only samples witth those stacks. The new stacks' roots will be frames whose
func is the last element of the prefix func array.

**Parameters**

-   `thread` **Thread** The thread.
-   `prefixFuncs` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;IndexIntoFuncTable>** The prefix stack, as an array of funcs.
-   `matchJSOnly` **[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** Ignore non-JS frames during matching.

Returns **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The filtered thread.

### filterThreadToPostfixStack

[src/content/profile-data.js:301-339](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/profile-data.js#L301-L339 "Source code on GitHub")

Filter thread to only contain stacks which end with |postfixFuncs|, and
only samples witth those stacks. The new stacks' leaf frames will be
frames whose func is the last element of the postfix func array.

**Parameters**

-   `thread` **Thread** The thread.
-   `postfixFuncs` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;IndexIntoFuncTable>** The postfix stack, as an array of funcs,
                        starting from the leaf func.
-   `matchJSOnly` **[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** Ignore non-JS frames during matching.

Returns **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The filtered thread.

## getChildren

[src/content/profile-tree.js:27-44](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/profile-tree.js#L27-L44 "Source code on GitHub")

Return an array of funcStackIndex for the children of the node with index funcStackIndex.

**Parameters**

-   `funcStackIndex` **\[type]** [description]

Returns **\[type]** [description]

## getNode

[src/content/profile-tree.js:67-84](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/profile-tree.js#L67-L84 "Source code on GitHub")

Return an object with information about the node with index funcStackIndex.

**Parameters**

-   `funcStackIndex` **\[type]** [description]

Returns **\[type]** [description]

## SymbolStoreDB

[src/content/symbol-store-db.js:8-127](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/symbol-store-db.js#L8-L127 "Source code on GitHub")

A wrapper around an IndexedDB table that stores symbol tables.

### constructor

[src/content/symbol-store-db.js:13-16](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/symbol-store-db.js#L13-L16 "Source code on GitHub")

**Parameters**

-   `dbName` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The name of the indexedDB database that's used
                           to store the symbol tables.

### getSymbolsForAddressesInLib

[src/content/symbol-store-db.js:101-126](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/symbol-store-db.js#L101-L126 "Source code on GitHub")

Returns a promise of an array with symbol names, matching the order of
the requested addresses.

**Parameters**

-   `requestedAddressesIndices` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)>** The indices of each symbol that should be looked up.
-   `libKey` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** The primary key for the library, as returned by getLibKey

Returns **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)>** The symbols, one for each address in requestedAddresses.

## SymbolStore

[src/content/symbol-store.js:8-83](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/symbol-store.js#L8-L83 "Source code on GitHub")

Lets you get symbol tables and only requests them from the symbol provider once.

### constructor

[src/content/symbol-store.js:17-29](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/symbol-store.js#L17-L29 "Source code on GitHub")

SymbolStore constructor.

**Parameters**

-   `dbNamePrefix` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** A prefix for the indexedDB database which the SymbolStore
                                   uses internally (using asyncStorage) to store symbol tables.
-   `symbolProvider` **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** An object with a method 'requestSymbolTable(pdbName, breakpadId)'
                                   which will be called whenever we need a symbol table. This method
                                   needs to return a promise of [addr, syms](<the symbol table>).

### getFuncAddressTableForLib

[src/content/symbol-store.js:68-71](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/symbol-store.js#L68-L71 "Source code on GitHub")

Get the array of symbol addresses for the given library.

**Parameters**

-   `lib` **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** A library object with the properties `pdbName` and `breakpadId`.

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)>>** A promise of the array of addresses.

### getSymbolsForAddressesInLib

[src/content/symbol-store.js:79-82](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/symbol-store.js#L79-L82 "Source code on GitHub")

Get an array of symbol strings for the given symbol indices.

**Parameters**

-   `requestedAddressesIndices` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)>** An array where each element is the index of the symbol whose string should be looked up.
-   `lib` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** A library object with the properties `pdbName` and `breakpadId`.

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)>>** An promise array of strings, in the order as requested.

## getContainingLibrary

[src/content/symbolication.js:10-28](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/symbolication.js#L10-L28 "Source code on GitHub")

Return the library object that contains address.

**Parameters**

-   `libs` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)>** The array of libraries, each with a start and end property.
-   `address` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** The address to find

Returns **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** lib object       The lib object that contains address, rv.start &lt;= address &lt; rv.end, or null if no such lib object exists.

## getClosestLibrary

[src/content/symbolication.js:36-47](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/symbolication.js#L36-L47 "Source code on GitHub")

[getContainingLibrary description]

**Parameters**

-   `libs` **\[type]** [description]
-   `address` **\[type]** [description]

Returns **\[type]** [description]

## gatherFuncsInThread

[src/content/symbolication.js:59-88](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/symbolication.js#L59-L88 "Source code on GitHub")

Find the functions in this thread's funcTable that we need symbols for.

**Parameters**

-   `thread` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The thread, in "preprocessed profile" format.

Returns **[Map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map)** A map containing the funcIndices of the functions that
                        need to be symbolicated. Each entry's key is a lib
                        object from the thread's libs array, and the value is
                        an array of funcIndex.
                        Example:
                        map.get(lib): [0, 1, 2, 8, 34]

## findFunctionsToMergeAndSymbolicationAddresses

[src/content/symbolication.js:113-157](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/symbolication.js#L113-L157 "Source code on GitHub")

Using the provided func address table, find out which funcs are actually the
same function, and make a list of the real func addresses that we need
symbols for.
Before we had the func address table for this library, we weren't able to
tell whether two frames are the same function, so we naively created one
function per frame, giving each function the address of the frame.
Now that we know at which address each function truly starts, we can find
out which of the naively-created funcs are the same function and collapse
those into just one func. This information is returned in the
oldFuncToNewFuncMap outparameter.
Before we can request symbols, we need to make a list of func addresses for
the symbols we need. These addresses need to be the true function start
addresses from the func address table. This information is returned in the
return value - the return value is a map whose keys are the true func
addresses that we need symbols for. The value of each map entry is the
funcIndex for the func that has become the "one true func" for this function.

**Parameters**

-   `funcAddressTable` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)** An array containing the address of every function of a library, in ascending order.
-   `funcsToSymbolicate` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)** An array containing funcIndex elements for the funcs in this library.
-   `funcTable` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The funcTable that the funcIndices in addressToSymbolicate refer to.
-   `oldFuncToNewFuncMap` **[Map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map)** An out parameter that specifies how funcs should be merged.

Returns **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** A map that maps a func address index to a funcIndex, one entry for each func that needs to be symbolicated.

## setFuncNames

[src/content/symbolication.js:169-179](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/symbolication.js#L169-L179 "Source code on GitHub")

Modify the symbolicated funcs to point to the new func name strings.
This function adds the func names to the thread's string table and
adjusts the funcTable to point to those strings.

**Parameters**

-   `thread` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The thread whose funcTable needs adjusting.
-   `funcIndices` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** An array of indices of the functions that we got symbols for.
-   `funcNames` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** An array of strings containing the corresponding symbols.
-   `addrToFuncIndexMap` **[Map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map)** A Map that maps a func address to the funcIndex.

Returns **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The new thread object.

## applyFunctionMerging

[src/content/symbolication.js:194-202](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/symbolication.js#L194-L202 "Source code on GitHub")

Correctly collapse a function into another function and return a consistent
profile that no longer refers to the collapsed-away function.
The new frameTable has an updated func column, where all pointers
to old funcs have been replaced to the corresponding new func.
"Functions" in a profile are created before the library's function table is
known, by creating one function per frame address. Once the function table
is known, different addresses that are inside the same function need to be
merged into that same function.

**Parameters**

-   `thread` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The thread that needs to be augmented. Treated as immutable.
-   `oldFuncToNewFuncMap` **[Map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map)** A map that defines which function should be collapsed into which other function.

Returns **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The new thread object.

## symbolicateThread

[src/content/symbolication.js:213-237](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/symbolication.js#L213-L237 "Source code on GitHub")

Symbolicate the given thread. Calls cbo.onMergeFunctions and cb.onGotFuncNames after each bit of
symbolication, and resolves the returned promise once completely done.

**Parameters**

-   `thread` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The thread to symbolicate, in the "preprocessed profile" format.
-   `threadIndex` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** The index of the thread. This is needed because it gets supplied in the callbacks.
-   `symbolStore` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** A SymbolStore object that can be used for getting the required symbol tables.
-   `cbo` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** An object containing callback functions 'onMergeFunctions'  and 'onGotFuncNames'.

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** A promise that resolves (with nothing) once symbolication of the thread has completed.

## symbolicateProfile

[src/content/symbolication.js:312-320](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/symbolication.js#L312-L320 "Source code on GitHub")

Symbolicate a profile.

**Parameters**

-   `profile` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The profile to symbolicate, in preprocessed format.
-   `symbolStore` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** A SymbolStore object with a getFuncAddressTableForLib and getSymbolsForAddressesInLib methods.
-   `cbo` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** An object containing callback functions 'onMergeFunctions', 'onGotFuncNames' and 'onGotTaskTracerNames'.

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** A promise that resolves (with nothing) once symbolication has completed.

## encodingChars

[src/content/uintarray-encoding.js:6-7](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/uintarray-encoding.js#L6-L7 "Source code on GitHub")

Space-efficient url component compatible encoding for arrays of 32bit
unsigned integers. Smaller numbers take up fewer characters.

## withSize

[src/content/with-size.js:15-44](https://github.com/clarkbw/cleopatra/blob/65511737ac58e2a16548937012b4e0265fb5bced/src/content/with-size.js#L15-L44 "Source code on GitHub")

Wraps a React component and makes 'width' and 'height' available in the
wrapped component's props. These props start out at zero and are updated to
the component's DOM node's getBoundingClientRect().width/.height after the
component has been mounted. They also get updated when the window is
resized.
Note that the props are _not_ updated if the size of the element changes
for reasons other than a window resize.

**Parameters**

-   `Wrapped` **class** The class that gets wrapped.

Returns **class** The resulting Component class.
